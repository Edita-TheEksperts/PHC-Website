datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Service {
  id    String @id @default(uuid())
  name  String @unique
  users User[] @relation("UserService")
}

model SubService {
  id    String @id @default(uuid())
  name  String @unique
  users User[] @relation("UserSubService")
}

model User {
  id                    String   @id @default(uuid())
  fullName              String?
  email                 String   @unique
  phone                 String?
  passwordHash          String
  address               String
  frequency             String
  duration              Int?
  firstDate             DateTime?
  emergencyContactName  String?
  emergencyContactPhone String?
  cardNumber            String?
  expiryDate            String?
  cvc                   String?
  languages             String?
  pets                  String?

   form4Completed     Boolean? @default(false)


  role         Role    @default(client)
  serviceId    String?
  subServiceId String?

  service    Service?    @relation("UserService", fields: [serviceId], references: [id])
  subService SubService? @relation("UserSubService", fields: [subServiceId], references: [id])

  healthQuestion HealthQuestion? @relation("UserHealthQuestion") 
 mobility             String?
  transport            String?
  appointments         String?
  appointmentsOther    String?
  shoppingAssist       String?
  shoppingType         String?
  briefkasten          String?
  postfach             String?
  sonstige             String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

}

model HealthQuestion {
  id              String  @id @default(uuid())
  allergies       String?
  specialRequests String?
  userId          String  @unique
  user            User    @relation("UserHealthQuestion", fields: [userId], references: [id])
}

enum Role {
  admin
  client
  employee
}

model Employee {
  id                 String   @id @default(uuid())
  email              String   @unique
  firstName          String
  lastName           String
  phone              String?
  address            String?
  residencePermit    String?
  experienceYears    Int
  experienceWhere    String?
  hasLicense         Boolean
  availabilityFrom   DateTime
  availabilityDays   String[]
  servicesOffered    String[]
  howFarCanYouTravel String?
  resumeUrl          String
  photoUrl           String?
  status             String   @default("pending") // pending/interviewed/approved
  createdAt          DateTime @default(now())
}
