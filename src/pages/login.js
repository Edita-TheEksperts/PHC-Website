import { useState } from "react";
import { useRouter } from "next/router"; // ← Add this line
import Link from 'next/link';


export default function LoginPage() {
    const router = useRouter(); // ← Add this line

    const [email, setEmail] = useState("");
    const [password, setPassword] = useState("");
  
    async function handleSubmit(e) {
      e.preventDefault();
      const res = await fetch("/api/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email, password }),
      });
  
      if (res.ok) {
        const data = await res.json();
localStorage.setItem("userToken", data.token);
localStorage.setItem("userRole", data.role);
  localStorage.setItem("email", email); // ← Add this

if (data.role === "employee") {
  router.push("/employee-dashboard");
} else if (data.role === "admin") {
  router.push("/admin-dashboard");
} else {
  router.push("/client-dashboard"); // for regular clients/users
}


      }
    }
      
    return (
      <div className="flex bg-[#FAFCFF] max-w-[1410px] mx-auto">
        
        {/* Left Image Section */}
        <div className="hidden lg:block w-1/2 mt-[15px]">
        <img
  src="/images/login-side-image.png"
  alt="Login Visual"
  className="w-[600px] h-[800px] object-cover rounded-[20px]"
/>

        </div>
  
        {/* Right Form Section */}
        <div className="flex flex-col justify-center mt-[30] lg:mt-0 items-left w-full lg:w-1/2 px-2 lg:px-10">
  
          {/* Logo */}
  <Link href="/">

          <div className="mb-20">
          <svg xmlns="http://www.w3.org/2000/svg" width="100" height="49" viewBox="0 0 100 49" fill="none">
  <g clip-path="url(#clip0_1799_1710)">
    <path d="M81.6191 6.59373C83.6888 5.50094 86.1177 4.95729 88.9084 4.95729C90.5943 4.95729 92.1789 5.12203 93.6784 5.45701C95.1697 5.80022 97.2477 6.53058 99.1968 7.37351V2.16215C95.9428 0.959527 92.4996 0.360962 88.8591 0.360962C85.2185 0.360962 81.8987 1.11054 79.0778 2.60696C76.2514 4.10886 74.0666 6.21757 72.5177 8.94955C70.977 11.6733 70.1985 14.8281 70.1985 18.3948C70.1985 21.9615 70.977 25.2454 72.5177 28.0405C74.0666 30.8356 76.2432 32.9965 79.0504 34.5314C81.8548 36.0607 85.0979 36.8268 88.7604 36.8268C91.0439 36.8268 93.1164 36.6126 94.9641 36.198C96.2717 35.8987 97.6781 35.432 99.1968 34.7895V29.4545C97.3107 30.4979 95.5837 31.22 94.0074 31.6209C92.4228 32.0273 90.6601 32.2277 88.711 32.2277C86.0903 32.2277 83.7573 31.6923 81.7287 30.6105C79.6946 29.5314 78.1019 27.9581 76.9587 25.8906C75.8156 23.8176 75.2454 21.3135 75.2454 18.3893C75.2454 15.6299 75.7882 13.2411 76.8792 11.2395C77.9703 9.23785 79.5576 7.68652 81.6191 6.59098V6.59373Z" fill="#04436F"/>
    <path d="M0 40.2507H3.48977C4.07369 40.2507 4.60826 40.3688 5.09074 40.6022C5.57322 40.8356 5.95702 41.1651 6.23664 41.5851C6.51626 42.008 6.65607 42.4803 6.65607 43.0074C6.65607 43.5346 6.51626 44.0069 6.23664 44.4297C5.95702 44.8525 5.57596 45.1793 5.09074 45.4127C4.60826 45.6461 4.07369 45.7641 3.48977 45.7641H0.975931V48.8585H0V40.2507ZM3.31433 44.8361C4.02434 44.8361 4.59181 44.6741 5.02221 44.3473C5.4526 44.0206 5.66643 43.5758 5.66643 43.0074C5.66643 42.4391 5.4526 41.9915 5.02221 41.6675C4.59181 41.3408 4.02434 41.1788 3.31433 41.1788H0.975931V44.8388H3.31433V44.8361Z" fill="#04436F"/>
    <path d="M9.74569 42.612C10.187 42.3566 10.7052 42.2303 11.2973 42.2303V43.0705C10.8148 43.0705 10.3817 43.1639 10.0034 43.3451C9.62507 43.5291 9.329 43.7872 9.11517 44.1167C8.90134 44.4461 8.79717 44.8196 8.79717 45.2369V48.8585H7.85962V42.3814H8.79717V43.6471C8.98907 43.2133 9.30707 42.8674 9.74843 42.612H9.74569Z" fill="#04436F"/>
    <path d="M12.3665 41.014C12.2459 40.8877 12.1855 40.7422 12.1855 40.5747C12.1855 40.4072 12.2459 40.2644 12.3665 40.1436C12.4871 40.0228 12.6351 39.9624 12.8106 39.9624C12.986 39.9624 13.1204 40.0228 13.241 40.1436C13.3616 40.2644 13.4219 40.41 13.4219 40.5747C13.4219 40.7394 13.3616 40.8877 13.241 41.014C13.1204 41.1403 12.9751 41.2007 12.8106 41.2007C12.6351 41.2007 12.4871 41.1376 12.3665 41.014ZM12.3363 42.3814H13.2739V48.8585H12.3363V42.3814Z" fill="#04436F"/>
    <path d="M23.096 42.5489C23.4469 42.7631 23.7183 43.0596 23.9157 43.4385C24.1104 43.8174 24.209 44.2513 24.209 44.7345V48.8586H23.2715V44.8608C23.2715 44.3336 23.1317 43.9053 22.8521 43.5703C22.5724 43.2353 22.2161 43.0679 21.7829 43.0679C21.2648 43.0679 20.8454 43.2244 20.5191 43.5374C20.1929 43.8504 20.0312 44.2485 20.0312 44.7345V48.8586H19.0936V44.8608C19.0936 44.3336 18.9538 43.9053 18.6742 43.5703C18.3946 43.2353 18.0382 43.0679 17.6051 43.0679C17.0869 43.0679 16.6675 43.2244 16.3413 43.5374C16.0151 43.8504 15.8533 44.2485 15.8533 44.7345V48.8586H14.9158V42.3814H15.8533V43.3342C16.0205 42.991 16.2673 42.7219 16.599 42.5269C16.9279 42.332 17.3063 42.2332 17.7312 42.2332C18.2136 42.2332 18.6413 42.3567 19.0086 42.6038C19.376 42.8509 19.6474 43.1859 19.8228 43.6115C19.9572 43.1942 20.2149 42.8592 20.5986 42.6093C20.9824 42.3595 21.4211 42.2332 21.9118 42.2332C22.3531 42.2332 22.7506 42.3402 23.1015 42.5517L23.096 42.5489Z" fill="#04436F"/>
    <path d="M29.9331 47.9442C30.3196 47.7932 30.6157 47.6093 30.8158 47.3924L31.3915 48.0074C31.1174 48.3094 30.7308 48.551 30.2346 48.735C29.7384 48.919 29.256 49.0096 28.7899 49.0096C28.2142 49.0096 27.6769 48.8641 27.1752 48.5703C26.6736 48.2792 26.2733 47.8701 25.969 47.3484C25.6647 46.8267 25.5112 46.2446 25.5112 45.5994C25.5112 44.9542 25.6538 44.3995 25.9416 43.8833C26.2295 43.3644 26.616 42.9608 27.104 42.667C27.5919 42.3759 28.1238 42.2277 28.6995 42.2277C29.6672 42.2277 30.421 42.5654 30.9583 43.2436C31.4957 43.919 31.7643 44.8306 31.7643 45.9756H26.4735C26.5392 46.6181 26.7832 47.1452 27.2054 47.5543C27.6276 47.9635 28.1512 48.1694 28.7762 48.1694C29.16 48.1694 29.5465 48.0953 29.9331 47.9442ZM27.2356 43.639C26.8189 44.0179 26.5694 44.5176 26.4844 45.1354H30.8377C30.7719 44.5176 30.5581 44.0179 30.199 43.639C29.8399 43.26 29.3519 43.0679 28.7351 43.0679C28.1512 43.0679 27.6495 43.2573 27.2328 43.639H27.2356Z" fill="#04436F"/>
    <path d="M43.4891 40.2507V48.8585H42.5132V44.9377H37.4471V48.8585H36.4712V40.2507H37.4471V44.0096H42.5132V40.2507H43.4891Z" fill="#04436F"/>
    <path d="M46.5156 48.5455C45.9975 48.2353 45.5863 47.8207 45.282 47.299C44.9777 46.7773 44.8242 46.2144 44.8242 45.6131C44.8242 45.0118 44.975 44.4517 45.282 43.9328C45.5863 43.4138 45.9975 43.002 46.5156 42.6917C47.0338 42.3814 47.5875 42.2277 48.1797 42.2277C48.7718 42.2277 49.3256 42.3814 49.8382 42.6917C50.3508 43.002 50.7593 43.4138 51.0636 43.9328C51.3679 44.4517 51.5214 45.0091 51.5214 45.6131C51.5214 46.2172 51.3679 46.7773 51.0636 47.299C50.7593 47.8207 50.3508 48.238 49.8382 48.5455C49.3256 48.8558 48.7718 49.0096 48.1797 49.0096C47.5875 49.0096 47.0338 48.8558 46.5156 48.5455ZM49.3502 47.8179C49.7121 47.5845 49.9999 47.2715 50.2138 46.8844C50.4276 46.4972 50.5318 46.0717 50.5318 45.6131C50.5318 45.1546 50.4249 44.74 50.2138 44.3474C49.9999 43.9547 49.7121 43.6445 49.3502 43.4138C48.9884 43.1832 48.5964 43.0679 48.1797 43.0679C47.763 43.0679 47.36 43.1832 46.9981 43.4138C46.6363 43.6445 46.3484 43.9547 46.1346 44.3474C45.9208 44.74 45.8166 45.1628 45.8166 45.6131C45.8166 46.0634 45.9235 46.4972 46.1346 46.8844C46.3484 47.2715 46.6363 47.5845 46.9981 47.8179C47.36 48.0513 47.7548 48.1694 48.1797 48.1694C48.6046 48.1694 48.9856 48.0513 49.3502 47.8179Z" fill="#04436F"/>
    <path d="M61.004 42.5489C61.3549 42.7631 61.6263 43.0596 61.8237 43.4385C62.0183 43.8174 62.117 44.2513 62.117 44.7345V48.8586H61.1795V44.8608C61.1795 44.3336 61.0396 43.9053 60.76 43.5703C60.4804 43.2353 60.124 43.0679 59.6909 43.0679C59.1728 43.0679 58.7533 43.2244 58.4271 43.5374C58.1009 43.8504 57.9391 44.2485 57.9391 44.7345V48.8586H57.0016V44.8608C57.0016 44.3336 56.8618 43.9053 56.5822 43.5703C56.3025 43.2353 55.9462 43.0679 55.513 43.0679C54.9949 43.0679 54.5755 43.2244 54.2492 43.5374C53.923 43.8504 53.7613 44.2485 53.7613 44.7345V48.8586H52.8237V42.3814H53.7613V43.3342C53.9285 42.991 54.1752 42.7219 54.5069 42.5269C54.8359 42.332 55.2142 42.2332 55.6391 42.2332C56.1216 42.2332 56.5493 42.3567 56.9166 42.6038C57.284 42.8509 57.5553 43.1859 57.7308 43.6115C57.8651 43.1942 58.1228 42.8592 58.5066 42.6093C58.8904 42.3595 59.329 42.2332 59.8197 42.2332C60.2611 42.2332 60.6586 42.3402 61.0095 42.5517L61.004 42.5489Z" fill="#04436F"/>
    <path d="M67.8408 47.9442C68.2273 47.7932 68.5234 47.6093 68.7235 47.3924L69.2992 48.0074C69.0251 48.3094 68.6385 48.551 68.1423 48.735C67.6462 48.919 67.1637 49.0096 66.6976 49.0096C66.1219 49.0096 65.5846 48.8641 65.083 48.5703C64.5813 48.2792 64.181 47.8701 63.8768 47.3484C63.5725 46.8267 63.4189 46.2446 63.4189 45.5994C63.4189 44.9542 63.5615 44.3995 63.8493 43.8833C64.1372 43.3644 64.5237 42.9608 65.0117 42.667C65.4997 42.3759 66.0315 42.2277 66.6072 42.2277C67.5749 42.2277 68.3288 42.5654 68.8661 43.2436C69.4034 43.919 69.672 44.8306 69.672 45.9756H64.3812C64.447 46.6181 64.6909 47.1452 65.1131 47.5543C65.5353 47.9635 66.0589 48.1694 66.6839 48.1694C67.0677 48.1694 67.4543 48.0953 67.8408 47.9442ZM65.146 43.639C64.7293 44.0179 64.4799 44.5176 64.3949 45.1354H68.7482C68.6824 44.5176 68.4686 44.0179 68.1094 43.639C67.7503 43.26 67.2624 43.0679 66.6455 43.0679C66.0616 43.0679 65.56 43.2573 65.1433 43.639H65.146Z" fill="#04436F"/>
    <path d="M76.2596 48.4028C75.5797 47.9964 75.0397 47.4528 74.6394 46.7663C74.2392 46.0826 74.0391 45.3413 74.0391 44.5478C74.0391 43.7543 74.2392 43.0184 74.6394 42.3347C75.0397 41.6538 75.5797 41.1102 76.2596 40.7065C76.9394 40.3002 77.6659 40.0997 78.4417 40.0997C79.0256 40.0997 79.5849 40.2151 80.1194 40.4429C80.654 40.6736 81.1255 40.9976 81.534 41.4149L80.8706 42.0904C80.5526 41.7472 80.1852 41.4808 79.7631 41.2886C79.3409 41.0964 78.9023 41.0003 78.4445 41.0003C77.8359 41.0003 77.2712 41.1623 76.7503 41.4836C76.2294 41.8048 75.8127 42.2386 75.5002 42.7878C75.1877 43.3342 75.0314 43.9218 75.0314 44.5478C75.0314 45.1738 75.1877 45.7724 75.5002 46.316C75.8127 46.8597 76.2294 47.2935 76.7503 47.6202C77.2712 47.947 77.8359 48.109 78.4445 48.109C78.9023 48.109 79.3436 48.0129 79.7631 47.8207C80.1852 47.6285 80.5526 47.3621 80.8706 47.0189L81.534 47.6944C81.1255 48.1035 80.654 48.4247 80.1194 48.6581C79.5849 48.8915 79.0256 49.0096 78.4417 49.0096C77.6659 49.0096 76.9394 48.8064 76.2596 48.4028Z" fill="#04436F"/>
    <path d="M87.184 42.9635C87.6309 43.4523 87.8529 44.103 87.8529 44.913V48.8613H86.9154V47.8454C86.6906 48.2133 86.3671 48.4989 85.9449 48.7048C85.5228 48.9107 85.0869 49.0123 84.6373 49.0123C83.9437 49.0123 83.379 48.8256 82.9349 48.4494C82.4935 48.0733 82.2715 47.5736 82.2715 46.9448C82.2715 46.5275 82.3866 46.154 82.6142 45.8245C82.8444 45.4951 83.1515 45.2397 83.5407 45.0612C83.9273 44.8828 84.3522 44.7922 84.81 44.7922C85.4597 44.7922 86.1615 44.913 86.9126 45.1546V44.9157C86.9126 44.3885 86.7783 43.9437 86.5124 43.5813C86.2465 43.2189 85.7942 43.0349 85.1609 43.0349C84.8676 43.0349 84.5715 43.0871 84.2672 43.1914C83.9629 43.2957 83.6312 43.4413 83.2721 43.6225L82.8965 42.8592C83.7299 42.4418 84.5057 42.2332 85.224 42.2332C86.082 42.2332 86.7344 42.4775 87.1813 42.9663L87.184 42.9635ZM86.1204 47.8262C86.5343 47.5873 86.7975 47.2551 86.9154 46.8295V45.8383C86.2821 45.6626 85.6297 45.5747 84.9635 45.5747C84.4701 45.5747 84.0534 45.701 83.7052 45.9509C83.3598 46.2007 83.1871 46.5192 83.1871 46.9036C83.1871 47.288 83.3379 47.6065 83.6449 47.8372C83.9492 48.0678 84.3357 48.1831 84.8018 48.1831C85.2678 48.1831 85.7092 48.065 86.1204 47.8262Z" fill="#04436F"/>
    <path d="M91.4935 42.612C91.9349 42.3566 92.453 42.2303 93.0451 42.2303V43.0705C92.5626 43.0705 92.1295 43.1639 91.7512 43.3451C91.3729 43.5291 91.0768 43.7872 90.863 44.1167C90.6492 44.4461 90.545 44.8196 90.545 45.2369V48.8585H89.6074V42.3814H90.545V43.6471C90.7369 43.2133 91.0549 42.8674 91.4962 42.612H91.4935Z" fill="#04436F"/>
    <path d="M98.1687 47.9442C98.5552 47.7932 98.8513 47.6093 99.0514 47.3924L99.6271 48.0074C99.3529 48.3094 98.9664 48.551 98.4702 48.735C97.974 48.919 97.4915 49.0096 97.0255 49.0096C96.4498 49.0096 95.9125 48.8641 95.4108 48.5703C94.9092 48.2792 94.5089 47.8701 94.2046 47.3484C93.9003 46.8267 93.7468 46.2446 93.7468 45.5994C93.7468 44.9542 93.8894 44.3995 94.1772 43.8833C94.4651 43.3644 94.8516 42.9608 95.3396 42.667C95.8275 42.3759 96.3594 42.2277 96.9351 42.2277C97.9028 42.2277 98.6566 42.5654 99.1939 43.2436C99.7313 43.919 99.9999 44.8306 99.9999 45.9756H94.7091C94.7748 46.6181 95.0188 47.1452 95.441 47.5543C95.8632 47.9635 96.3868 48.1694 97.0118 48.1694C97.3956 48.1694 97.7821 48.0953 98.1687 47.9442ZM95.4712 43.639C95.0545 44.0179 94.805 44.5176 94.72 45.1354H99.0733C99.0075 44.5176 98.7937 44.0179 98.4346 43.639C98.0755 43.26 97.5875 43.0679 96.9707 43.0679C96.3868 43.0679 95.8851 43.2573 95.4684 43.639H95.4712Z" fill="#04436F"/>
    <path d="M25.2865 5.57234C24.1872 3.78488 22.6658 2.41202 20.7112 1.45377C18.7538 0.487276 16.5004 0.00952148 13.929 0.00952148H0.405762V36.047H5.34573V23.4854H13.9262C16.4949 23.4854 18.7675 23.0076 20.7358 22.0494C22.7069 21.0829 24.2256 19.7265 25.3057 17.9528C26.3913 16.1873 26.9259 14.1197 26.9259 11.7529C26.9259 9.38613 26.3748 7.3543 25.2838 5.57508L25.2865 5.57234ZM14.798 19.1224H5.34573V4.42737H14.798C18.8525 4.42737 22.1284 7.71674 22.1284 11.7776C22.1284 15.8386 18.8525 19.1197 14.798 19.1197V19.1224Z" fill="#04436F"/>
    <path d="M58.6655 0.00952148V36.047H63.6055V0.00952148H58.6655ZM32.606 0.00952148V36.047H37.5459V0.00952148H32.606Z" fill="#04436F"/>
    <path d="M67.9315 21.0911L48.2319 13.0709C48.1497 13.0407 48.0592 13.0407 47.9797 13.0709L28.2802 21.0911C28.0965 21.1597 28.0033 21.3629 28.0718 21.5469L28.8476 23.6803C28.9162 23.867 29.1245 23.9631 29.3109 23.8917L47.9825 18.0049C48.0647 17.9747 48.1552 17.9747 48.2347 18.0049L66.9062 23.8917C67.0926 23.9631 67.301 23.867 67.3695 23.6803L68.1453 21.5469C68.2111 21.3629 68.1179 21.1597 67.937 21.0911H67.9315Z" fill="#B99B5F"/>
  </g>
  <defs>
    <clipPath id="clip0_1799_1710">
      <rect width="100" height="49" fill="white" transform="translate(0 0.00952148)"/>
    </clipPath>
  </defs>
</svg>
          </div>
  </Link>
          {/* Welcome Back */}
          <h1 className="text-[#04436F] text-left font-bold text-[40px] lg:leading-[17px] tracking-[0.18px] ">
Willkommen bei PHC          </h1>
          <p className="text-[#04436F] text-left mt-6 text-[16px]">
  Wir freuen uns, Sie wieder bei Prime Home Care begrüssen zu dürfen.
          </p>
  
          {/* Form */}
          <form onSubmit={handleSubmit} className="flex flex-col w-full gap-[20px] mt-10">
            
            {/* Email */}
            <div className="flex flex-col w-full">
              <label className="text-[#04436F] font-bold text-[15px] leading-[25.6px] mb-2">
      E-Mail-Adresse
              </label>
              <input
  type="email"
  placeholder="Ihre Email"
  className="h-[48px] w-full rounded-[10px] border border-[#C8D4E7] bg-[#FAFCFF] px-4"
  value={email}
  onChange={(e) => setEmail(e.target.value)}
  required
/>

            </div>
  
            {/* Password */}
            <div className="flex flex-col w-full">
              <label className="text-[#04436F] font-bold text-[15px] leading-[25.6px] mb-2">
                Passwort
              </label>
              <input
  type="password"
  placeholder="Ihr Passwort"
  className="h-[48px] w-full rounded-[10px] border border-[#C8D4E7] bg-[#FAFCFF] px-4"
  value={password}
  onChange={(e) => setPassword(e.target.value)}
  required
/>

            </div>
  
            {/* Submit Button */}
            <button
              type="submit"
              className="bg-[#04436F] text-white text-[18px] font-[500] h-[48px] rounded-[10px] mt-4"
            >
              Absenden
            </button>
            <div className="text-right mt-2">
  <a href="/forgot-password" className="text-[#04436F] text-sm underline">
      Passwort vergessen?
  </a>
</div>

  
          </form>
        </div>
  
      </div>
    );
  }
  